(()=>{"use strict";var e,t={"./assets/js/mail_answer.js":(e,t,n)=>{var a=n("./node_modules/vue/dist/vue.common.prod.js"),s=n.n(a),o=n("./node_modules/vuex/dist/vuex.esm.js"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("app-menu",{attrs:{"menu-info":e.menuInfo}}),e._v(" "),n("b-container",[n("h1",[e._v("Réponse d'email")]),e._v(" "),n(e.currentComponent,{tag:"component",attrs:{id:e.templateId},on:{changeComponent:function(t){return e.changeComponent(t)},changeId:function(t){e.templateId=t}}})],1)],1)};i._withStripped=!0;var r=n("./node_modules/bootstrap-vue/esm/index.js"),c=(n("./node_modules/vue-awesome/icons/index.js"),n("./node_modules/vue-awesome/components/Icon.vue")),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-row",[n("p",[e.remoteInUse&&e.isRemote?e._e():n("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.editTemplate(null)}}},[n("icon",{attrs:{name:"plus"}}),e._v("\n                Ajouter un template\n            ")],1)],1)]),e._v(" "),e._l(e.templates,(function(t){return n("b-row",{key:t.id,staticClass:"mb-2"},[n("b-col",[n("b-card",{attrs:{title:t.name}},[n("p",{staticClass:"card-text"},[e._v("\n                    Utilisé par un envoi d'email : "),n("icon",{attrs:{name:t.is_used?"check":"times",scale:"1.2",color:t.is_used?"green":"red"}})],1),e._v(" "),e.remoteInUse&&e.isRemote!=t.is_used?e._e():n("b-button",{on:{click:function(n){return e.editTemplate(t.id)}}},[n("icon",{attrs:{name:"edit"}}),e._v("Modifier\n                ")],1),e._v(" "),!t.is_used||e.remoteInUse&&!e.isRemote?e._e():n("b-button",{attrs:{variant:"light"},on:{click:function(n){return e.showAnswers(t.id)}}},[n("icon",{attrs:{name:"eye"}}),e._v("\n                    Voir les réponses\n                ")],1),e._v(" "),t.is_used&&e.remoteInUse&&!e.isRemote?n("a",{attrs:{href:e.$store.state.settings.remote_url+"mail_answer"}},[e._v("\n                    Voir les réponses et/ou modifier le modèle\n                ")]):e._e()],1)],1)],1)}))],2)};l._withStripped=!0;var u=n("./node_modules/axios/index.js"),d=n.n(u);const m={data:function(){return{templates:[]}},computed:{remoteInUse:function(){return this.$store.state.settings.use_remote},isRemote:function(){return this.$store.state.settings.is_remote}},methods:{loadData:function(){var e=this;d().get("/mail_answer/api/mail_template/",{xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken"}).then((function(t){e.templates=t.data.results})).catch((function(e){console.log(e)}))},editTemplate:function(e){this.$emit("changeId",e),this.$emit("changeComponent","mail-template")},showAnswers:function(e){this.$emit("changeId",e),this.$emit("changeComponent","mail-answer-list")}},mounted:function(){this.loadData()},components:{}};var h=n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),p=(0,h.Z)(m,l,[],!1,null,null,null);p.options.__file="assets/mail_answer/mail_template_list.vue";const f=p.exports;var v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-row",[n("p",[n("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.$emit("changeComponent","mail-template-list")}}},[e._v("\n                Revenir à la liste des modèles\n            ")])],1)]),e._v(" "),n("b-row",[n("b-col",[n("b-card",{attrs:{header:e.name.length>0?e.name:"Choisissez un nom de modèle !"}},[n("b-form-group",{attrs:{label:"Nom du modèle :"}},[n("b-form-input",{attrs:{type:"text",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),n("p",[e._v("\n                    En tant que responsable de "+e._s(e.student.fullname)+" en "+e._s(e.student.classe)+", veuillez remplir le formulaire suivant. Si vous n'êtes pas responsable de "+e._s(e.student.fullname)+",\n                    merci de contacter au plus vite le service informatique de l'école.\n                ")]),e._v(" "),n("p",[n("b-btn",{class:e.hasText?"collapsed":null,attrs:{"aria-controls":"intro-text","aria-expanded":e.hasText?"true":"false"},on:{click:function(t){e.hasText=!e.hasText}}},[e._v("\n                        "+e._s(e.hasText?"Enlever":"Ajouter")+" texte d'introduction\n                    ")])],1),e._v(" "),n("b-collapse",{staticClass:"mt-2",attrs:{id:"intro-text"},model:{value:e.hasText,callback:function(t){e.hasText=t},expression:"hasText"}},[n("b-form-group",[n("b-form-textarea",{attrs:{id:"intro-textarea",rows:3},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1)],1),e._v(" "),n("p",[n("b-btn",{class:e.hasChoices?"collapsed":null,attrs:{disabled:e.is_used,"aria-controls":"has-choices","aria-expanded":e.hasChoices?"true":"false"},on:{click:function(t){e.hasChoices=!e.hasChoices}}},[e._v("\n                        "+e._s(e.hasChoices?"Enlever":"Ajouter")+" choix unique\n                    ")])],1),e._v(" "),n("b-collapse",{staticClass:"mt-2",attrs:{id:"has-choices"},model:{value:e.hasChoices,callback:function(t){e.hasChoices=t},expression:"hasChoices"}},[n("b-card",[n("choices",{attrs:{choices:e.choices,disabled:e.is_used}})],1)],1),e._v(" "),n("p",[n("b-btn",{class:e.hasOptions?"collapsed":null,attrs:{disabled:e.is_used,"aria-controls":"has-options","aria-expanded":e.hasOptions?"true":"false"},on:{click:function(t){e.hasOptions=!e.hasOptions}}},[e._v("\n                        "+e._s(e.hasOptions?"Enlever":"Ajouter")+" choix multiples\n                    ")])],1),e._v(" "),n("b-collapse",{staticClass:"mt-2",attrs:{id:"has-options"},model:{value:e.hasOptions,callback:function(t){e.hasOptions=t},expression:"hasOptions"}},[n("b-card",[n("options",{attrs:{options:e.options,disabled:e.is_used}})],1)],1),e._v(" "),n("p",[n("b-btn",{class:e.hasAcknowledge?"collapsed":null,attrs:{"aria-controls":"has-acknowlegde","aria-expanded":e.hasAcknowledge?"true":"false"},on:{click:function(t){e.hasAcknowledge=!e.hasAcknowledge}}},[e._v("\n                        "+e._s(e.hasAcknowledge?"Enlever":"Ajouter")+" confirmation\n                    ")])],1),e._v(" "),n("b-collapse",{attrs:{id:"has-acknowlegde"},model:{value:e.hasAcknowledge,callback:function(t){e.hasAcknowledge=t},expression:"hasAcknowledge"}},[n("b-card",[n("acknowledgement",{attrs:{text:e.acknowledgeText},on:{update:function(t){e.acknowledgeText=t}}})],1)],1),e._v(" "),n("b-row",[n("b-col",[n("div",{staticClass:"mt-2"},[n("b-btn",{attrs:{variant:"primary"},on:{click:e.sendData}},[e._v("\n                                Sauvegarder "),e.saving?n("icon",{attrs:{name:"spinner",scale:"1",spin:e.saving}}):e._e()],1)],1)])],1)],1)],1)],1)],1)};v._withStripped=!0;var _=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-row",[n("b-form-group",[n("b-form-radio-group",{attrs:{stacked:""}},e._l(e.choices,(function(t,a){return n("b-form-radio",{key:t.id},[n("b-form",{attrs:{inline:""}},[e._v("\n                        "+e._s(t.text)+"\n                        "),t.input?n("b-form-input",{staticClass:"ml-1",attrs:{type:"text"}}):e._e(),e._v(" "),n("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.addChoiceModal",modifiers:{addChoiceModal:!0}}],staticClass:"ml-1",attrs:{variant:"light"},on:{click:function(t){return e.editChoice(a)}}},[n("icon",{attrs:{name:"edit",color:"green"}})],1),e._v(" "),n("b-btn",{staticClass:"ml-1",attrs:{variant:"light",disabled:e.disabled},on:{click:function(t){return e.removeChoice(a)}}},[n("icon",{attrs:{name:"remove",color:"red"}})],1)],1)],1)})),1)],1)],1),e._v(" "),n("b-row",[n("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.addChoiceModal",modifiers:{addChoiceModal:!0}}],attrs:{variant:"success"}},[n("icon",{attrs:{name:"plus",color:"white"}}),e._v("Ajouter un choix\n        ")],1)],1),e._v(" "),n("b-modal",{ref:"addChoiceModal",attrs:{id:"addChoiceModal",disabled:e.disabled,"cancel-title":"Annuler",title:"Ajouter un choix",centered:""},on:{ok:e.addChoice,hidden:e.resetModal}},[n("b-form",[n("b-form-input",{attrs:{placeholder:"Texte du choix"},model:{value:e.textInput,callback:function(t){e.textInput=t},expression:"textInput"}}),e._v(" "),n("b-form-checkbox",{model:{value:e.checkInclude,callback:function(t){e.checkInclude=t},expression:"checkInclude"}},[e._v("\n                Inclure une entrée.\n            ")])],1)],1)],1)};_._withStripped=!0;const b={props:{choices:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1}},data:function(){return{textInput:"",checkInclude:!1,itemIndex:-1}},methods:{addChoice:function(){var e={xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken"};if(this.itemIndex<0){var t={text:this.textInput,input:this.checkInclude};d().post("/mail_answer/api/choices/",t,e).then((function(e){t.id=e.data.id})).catch((function(e){console.log(e)}))}else{var n=this.choices[this.itemIndex];n.text=this.textInput,n.input=this.checkInclude,d().put("/mail_answer/api/choices/"+this.choices[this.itemIndex].id+"/",n,e).then((function(){})).catch((function(e){console.log(e)}))}},editChoice:function(e){this.textInput=this.choices[e].text,this.checkInclude=this.choices[e].input,this.itemIndex=e},removeChoice:function(e){d().delete("/mail_answer/api/choices/"+this.choices[e].id+"/",{xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken"}).then((function(){})).catch((function(e){console.log(e)}))},resetModal:function(){this.textInput="",this.checkInclude=!1,this.itemIndex=-1}}};var x=(0,h.Z)(b,_,[],!1,null,null,null);x.options.__file="assets/mail_answer/choices.vue";const g=x.exports;var w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-row",[n("b-form-group",[n("b-form-checkbox-group",{attrs:{stacked:""}},e._l(e.options,(function(t,a){return n("b-form-checkbox",{key:t.id,attrs:{value:t.id}},[n("b-form",{attrs:{inline:""}},[e._v("\n                        "+e._s(t.text)+"\n                        "),t.input?n("b-form-input",{staticClass:"ml-1",attrs:{type:"text"}}):e._e(),e._v(" "),n("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.addOptionModal",modifiers:{addOptionModal:!0}}],staticClass:"ml-1",attrs:{variant:"light"},on:{click:function(t){return e.editOption(a)}}},[n("icon",{attrs:{name:"edit",color:"green"}})],1),e._v(" "),n("b-btn",{staticClass:"ml-1",attrs:{variant:"light",disabled:e.disabled},on:{click:function(t){return e.removeOption(a)}}},[n("icon",{attrs:{name:"remove",color:"red"}})],1)],1)],1)})),1)],1)],1),e._v(" "),n("b-row",[n("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.addOptionModal",modifiers:{addOptionModal:!0}}],attrs:{variant:"success"}},[n("icon",{attrs:{name:"plus"}}),e._v("Ajouter une option\n        ")],1)],1),e._v(" "),n("b-modal",{ref:"addOptionModal",attrs:{id:"addOptionModal",disabled:e.disabled,"cancel-title":"Annuler",title:"Ajouter une option",centered:""},on:{ok:e.addOption,hidden:e.resetModal}},[n("b-form",[n("b-form-input",{attrs:{placeholder:"Texte du choix"},model:{value:e.textInput,callback:function(t){e.textInput=t},expression:"textInput"}}),e._v(" "),n("b-form-checkbox",{model:{value:e.checkInclude,callback:function(t){e.checkInclude=t},expression:"checkInclude"}},[e._v("\n                Inclure une entrée.\n            ")])],1)],1)],1)};w._withStripped=!0;const k={props:{options:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1}},data:function(){return{selected:[],textInput:"",checkInclude:!1,itemIndex:-1}},methods:{addOption:function(){var e={xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken"};if(this.itemIndex<0){var t={text:this.textInput,input:this.checkInclude};d().post("/mail_answer/api/options/",t,e).then((function(e){t.id=e.data.id})).catch((function(e){console.log(e)}))}else{var n=this.options[this.itemIndex];n.text=this.textInput,n.input=this.checkInclude,d().put("/mail_answer/api/options/"+this.options[this.itemIndex].id+"/",n,e).then((function(){})).catch((function(e){console.log(e)}))}},editOption:function(e){this.textInput=this.options[e].text,this.checkInclude=this.options[e].input,this.itemIndex=e},removeOption:function(e){d().delete("/mail_answer/api/options/"+this.options[e].id+"/",{xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken"}).then((function(){})).catch((function(e){console.log(e)}))},resetModal:function(){this.textInput="",this.checkInclude=!1,this.itemIndex=-1}}};var C=(0,h.Z)(k,w,[],!1,null,null,null);C.options.__file="assets/mail_answer/options.vue";const y=C.exports;var I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-row",[n("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.changeAckModal",modifiers:{changeAckModal:!0}}],staticClass:"mr-1",attrs:{variant:"light"},on:{click:function(t){e.changedText=e.text}}},[n("icon",{attrs:{name:"edit",scale:"1",color:"green"}})],1),e._v(" "),n("b-form-checkbox",{attrs:{id:"acknowledgement"}},[e._v("\n            "+e._s(e.text)+"\n        ")])],1),e._v(" "),n("b-modal",{ref:"changeAckModal",attrs:{id:"changeAckModal","cancel-title":"Annuler",title:"Changer le  texte",centered:""},on:{ok:e.changeAck}},[n("b-form",[n("b-form-textarea",{attrs:{placeholder:"Texte de confirmation",rows:3},model:{value:e.changedText,callback:function(t){e.changedText=t},expression:"changedText"}})],1)],1)],1)};I._withStripped=!0;const A={props:{text:{type:String,default:""}},data:function(){return{changedText:""}},methods:{changeAck:function(){this.$emit("update",this.changedText)}}};var T=(0,h.Z)(A,I,[],!1,null,null,null);T.options.__file="assets/mail_answer/acknowledge.vue";const O=T.exports;s().component("Icon",c.Z);const S={props:{id:{type:String,default:"-1"}},data:function(){return{student:{fullname:"NOM ÉTUDIANT",classe:"CLASSE"},hasText:!1,name:"Nouveau modèle",text:"",hasChoices:!1,choices:[],hasOptions:!1,options:[],hasAcknowledge:!0,acknowledgeText:"En tant que responsable, je déclare avoir pris connaissance des présentes informations.",saving:!1,is_used:!1}},methods:{sendData:function(){var e=this;this.saving=!0;var t={xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken"},n={name:this.name,text:this.text,acknowledge:this.hasAcknowledge,acknowledge_text:this.acknowledgeText};if(this.hasChoices){var a=this.choices;n.choices=a.map((function(e){return e.id}))}if(this.hasOptions){var s=this.options;n.options=s.map((function(e){return e.id}))}var o="/mail_answer/api/mail_template/";this.id&&(o+=this.id.toString()+"/"),(this.id?d().put(o,n,t):d().post(o,n,t)).then((function(){e.saving=!1})).catch((function(e){console.log(e)}))},resetForm:function(){this.hasText=!1,this.name="Nouveau modèle",this.text="",this.hasChoices=!1,this.choices=[],this.hasOptions=!1,this.options=[],this.hasAcknowledge=!0,this.acknowledgeText="En tant que responsable, je déclare avoir pris connaissance des présentes informations."}},mounted:function(){var e=this;if(this.id){var t=this,n={xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken"};d().get("/mail_answer/api/mail_template/"+this.id+"/",n).then((function(a){e.name=a.data.name,e.text=a.data.text,e.is_used=a.data.is_used,e.text.length>0&&(e.hasText=!0),e.hasAcknowledge=a.data.acknowledge,e.acknowledgeText=a.data.acknowledge_text;var s=a.data.choices;if(s.length>0)for(var o in t.hasChoices=!0,s)d().get("/mail_answer/api/choices/"+s[o]+"/",n).then((function(e){t.choices.push(e.data)})).catch((function(e){console.log(e)}));var i=a.data.options;if(i.length>0)for(var r in t.hasOptions=!0,i)d().get("/mail_answer/api/options/"+i[r]+"/",n).then((function(e){t.options.push(e.data)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}},components:{Choices:g,Options:y,Acknowledgement:O}};var j=(0,h.Z)(S,v,[],!1,null,null,null);j.options.__file="assets/mail_answer/mail_template.vue";const N=j.exports;var M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-row",[n("p",[n("b-btn",{attrs:{variant:"primary"},on:{click:function(t){return e.$emit("changeComponent","mail-template-list")}}},[e._v("\n                Revenir à la liste des modèles\n            ")])],1)]),e._v(" "),n("b-row",[n("b-col",[n("b-card-group",{attrs:{columns:""}},e._l(e.answers,(function(t,a){return n("b-card",{key:a,staticClass:"mb-2",attrs:{header:"Année "+a}},[n("b-list-group",e._l(t,(function(t,a){return n("b-list-group-item",{directives:[{name:"b-modal",rawName:"v-b-modal.list-answers",modifiers:{"list-answers":!0}}],key:a,staticClass:"d-flex justify-content-between align-items-center",attrs:{button:""},on:{click:function(n){return e.loadAnswers(t[1][0])}}},[e._v("\n                            "+e._s(t[0])+"\n                            "),n("b-badge",{attrs:{pill:""}},[e._v("\n                                "+e._s(t[1][0].answered_count)+"/"+e._s(t[1][0].answers_count)+"\n                            ")])],1)})),1)],1)})),1)],1)],1),e._v(" "),n("b-modal",{attrs:{id:"list-answers",title:e.currentClasse.classe_name,size:"lg","ok-only":!0}},[n("b-list-group",e._l(e.currentAnswers,(function(t,a){return n("b-list-group-item",{key:a},[n("span",{class:t.is_answered?"":"font-italic"},[e._v(e._s(t.student_name))]),e._v(" "),t.is_answered?e._e():n("em",[e._v("(en attente d'une réponse)")]),e._v(" "),t.is_answered?n("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"answer-"+a,expression:"'answer-' + index"}],attrs:{variant:"light"}},[e._v("\n                    Réponse\n                ")]):e._e(),e._v(" "),n("b-collapse",{staticClass:"mt-2",attrs:{id:"answer-"+a}},[n("answer-result",{attrs:{answer:t.answer,template:e.template}})],1)],1)})),1)],1)],1)};M._withStripped=!0;var $=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-card",[n("div",{staticClass:"card-text"},[n("p",[e._v("\n                Accepte :\n                "),n("icon",{attrs:{name:e.result.acknowledge?"check":"times",color:e.result.acknowledge?"green":"red"}})],1)]),e._v(" "),e.result.choices?n("div",{staticClass:"card-text"},[n("p",[n("strong",[e._v("Choix : ")]),e._v(e._s(e.template.choices[this.result.choices.toString()]))]),e._v(" "),e.choiceComment?n("p",{staticClass:"ml-3"},[n("em",[e._v(e._s(e.choiceComment))])]):e._e()]):e._e(),e._v(" "),e.result.options?n("div",{staticClass:"card-text"},e._l(e.result.options,(function(t){return n("div",{key:t},[n("p",[n("strong",[e._v("Option : ")]),e._v(e._s(e.template.options[t.toString()]))]),e._v(" "),e.optionComment(t)?n("p",{staticClass:"ml-3"},[n("em",[e._v(e._s(e.optionComment(t)))])]):e._e()])})),0):e._e()])],1)};$._withStripped=!0;const E={props:{answer:{type:Object,default:function(){}},template:{type:Object,default:function(){}}},data:function(){return{result:{}}},computed:{choiceComment:function(){if(!this.result.choices)return"";for(var e in this.result.choiceText)if(this.result.choices==this.result.choiceText[e].id)return this.result.choiceText[e].text;return""},choice:function(){return this.result.choices?this.template:""}},methods:{optionComment:function(e){for(var t in this.result.optionText)if(e==this.result.optionText[t].id)return this.result.optionText[t].text;return""}},mounted:function(){this.result=JSON.parse(this.answer)}};var R=(0,h.Z)(E,$,[],!1,null,null,null);R.options.__file="assets/mail_answer/answer_result.vue";const Z=R.exports;function F(e,t){if(e){if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}const X={props:{id:{type:String,default:"-1"}},data:function(){return{answers:{},template:{},loading:!0,currentClasse:{},currentAnswers:[]}},methods:{loadData:function(){var e=this,t={xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken"},n="/mail_answer/api/answers_classes/"+this.id+"/";d().get(n,t).then((function(t){var n,a,s,o=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=F(e))){n&&(e=n);var a=0,s=function(){};return{s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,r=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){r=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(r)throw o}}}}(e.groupBy(t.data,(function(e){return e.classe_year})).entries());try{for(o.s();!(n=o.n()).done;){var i=(a=n.value,s=2,function(e){if(Array.isArray(e))return e}(a)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,s=!1,o=void 0;try{for(var i,r=e[Symbol.iterator]();!(a=(i=r.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return n}}(a,s)||F(a,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=i[0],c=i[1];e.$set(e.answers,r,Array.from(e.groupBy(c,(function(e){return e.classe_name}))))}}catch(e){o.e(e)}finally{o.f()}e.loading=!1})).catch((function(e){alert(e)})),d().get("/mail_answer/api/mail_template/"+this.id+"/",t).then((function(n){e.template=n.data;var a=e.template.choices;for(var s in e.template.choices={},a)d().get("/mail_answer/api/choices/"+a[s]+"/",t).then((function(t){e.$set(e.template.choices,t.data.id,t.data.text)})).catch((function(e){alert(e)}));var o=e.template.options;for(var i in e.template.options={},o)d().get("/mail_answer/api/options/"+o[i]+"/",t).then((function(t){e.$set(e.template.options,t.data.id,t.data.text)})).catch((function(e){alert(e)}))})).catch((function(e){alert(e)}))},loadAnswers:function(e){var t=this;this.currentClasse=e;var n="/mail_answer/api/answers/"+this.id+"/"+e.classe_id+"/";d().get(n,{xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken"}).then((function(e){t.currentAnswers=e.data})).catch((function(e){alert(e)}))},groupBy:function(e,t){var n=new Map;return e.forEach((function(e){var a=t(e),s=n.get(a);s?s.push(e):n.set(a,[e])})),n}},mounted:function(){this.loadData()},components:{AnswerResult:Z}};var U=(0,h.Z)(X,M,[],!1,null,null,null);U.options.__file="assets/mail_answer/mail_answer_list.vue";const D=U.exports;var q=n("./assets/common/menu.vue");s().use(r.ZPm),s().component("Icon",c.Z);const B={data:function(){return{menuInfo:{},currentComponent:"mail-template-list",templateId:null}},methods:{changeComponent:function(e){this.currentComponent=e}},mounted:function(){this.menuInfo=menu},components:{"mail-template-list":f,"mail-template":N,"mail-answer-list":D,"app-menu":q.Z}};var P=(0,h.Z)(B,i,[],!1,null,null,null);P.options.__file="assets/mail_answer/mail_answer.vue";const z=P.exports;s().use(o.ZP);var V=new o.ZP.Store({state:{settings}});new(s())({el:"#vue-app",data:{settings:{}},store:V,template:"<mail-answer/>",components:{MailAnswer:z}})}},n={};function a(e){var s=n[e];if(void 0!==s)return s.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=t,e=[],a.O=(t,n,s,o)=>{if(!n){var i=1/0;for(l=0;l<e.length;l++){for(var[n,s,o]=e[l],r=!0,c=0;c<n.length;c++)(!1&o||i>=o)&&Object.keys(a.O).every((e=>a.O[e](n[c])))?n.splice(c--,1):(r=!1,o<i&&(i=o));r&&(e.splice(l--,1),t=s())}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[n,s,o]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),a.j=864,(()=>{var e={864:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var s,o,[i,r,c]=n,l=0;for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(c)var u=c(a);for(t&&t(n);l<i.length;l++)o=i[l],a.o(e,o)&&e[o]&&e[o][0](),e[i[l]]=0;return a.O(u)},n=self.webpackChunkhappyschool=self.webpackChunkhappyschool||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=a.O(void 0,[351],(()=>a("./assets/js/mail_answer.js")));s=a.O(s)})();